<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AGENCIA RONIN // BARKHAUSEN-GHOST Ω</title>
    <style>
        :root {
            --neon-green: #00ff41;
            --dark-metal: #121212;
            --blood-orange: #ff4500;
            --interface-blue: #00d4ff;
        }
        body {
            font-family: 'Courier New', monospace;
            background-color: #000;
            color: var(--neon-green);
            margin: 0; padding: 20px;
            overflow-x: hidden;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            border: 2px solid var(--neon-green);
            padding: 40px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.2);
            background: linear-gradient(180deg, #050505 0%, #000 100%);
        }
        header { border-bottom: 3px double var(--neon-green); margin-bottom: 30px; padding-bottom: 10px; }
        h1 { font-size: 2.5em; margin: 0; text-shadow: 2px 2px #000, 0 0 10px var(--neon-green); }
        .status-bar { display: flex; justify-content: space-between; font-size: 0.8em; color: var(--interface-blue); margin-bottom: 20px; }
        
        /* --- TABS --- */
        .tab-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 30px; }
        .tab { border: 1px solid var(--neon-green); padding: 15px; text-align: center; cursor: pointer; transition: 0.3s; font-weight: bold; }
        .tab:hover { background: var(--neon-green); color: #000; }
        .active-tab { background: rgba(0, 255, 65, 0.1); border-bottom: 5px solid var(--neon-green); }

        /* --- CONTENT --- */
        .section { display: none; padding: 20px; border: 1px solid #222; background: rgba(10, 10, 10, 0.9); }
        .visible { display: block; }

        /* --- BOM TABLE --- */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        th { background: #1a1a1a; color: var(--interface-blue); padding: 10px; text-align: left; }
        td { border: 1px solid #222; padding: 10px; }
        .link { color: var(--blood-orange); text-decoration: none; font-weight: bold; }

        /* --- USB INTERFACE --- */
        .usb-panel { border: 2px dashed var(--interface-blue); padding: 20px; text-align: center; margin-top: 20px; }
        .btn-usb { background: var(--interface-blue); color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; }
        
        .code-block { background: #000; color: #aaa; padding: 15px; border-left: 4px solid var(--blood-orange); overflow-x: auto; font-size: 0.8em; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="status-bar">
            <span>DEVICE: BARKHAUSEN-GHOST_Ω</span>
            <span>KERNEL: 13101310-RONIN</span>
            <span>OS: VOID_METAL_v1</span>
        </div>
        <h1>EXPLOTACIÓN DE EFECTO BARKHAUSEN</h1>
        <p>Lectura de datos por histéresis magnética en estructuras de acero.</p>
    </header>

    <div class="tab-grid">
        <div class="tab active-tab" onclick="showTab('bom')">1. SOURCING (BOM)</div>
        <div class="tab" onclick="showTab('manual')">2. MANUAL DE CAMPO</div>
        <div class="tab" onclick="showTab('usb')">3. CONEXIÓN USB (WEB-SERIAL)</div>
    </div>

    <div id="bom" class="section visible">
        <h3>LISTA DE MATERIALES (ALIEXPRESS SOURCING)</h3>
        <table>
            <tr><th>Componente</th><th>Función</th><th>Link sugerido</th></tr>
            <tr><td><b>Pick-up Coil</b></td><td>Sensor magnético (Guitarra o Inductor)</td><td><a href="https://es.aliexpress.com/w/wholesale-guitar-pickup-single-coil.html" class="link">Ver en AliExpress</a></td></tr>
            <tr><td><b>Pre-Amp NE5532</b></td><td>Amplificación de micro-pulsos</td><td><a href="https://es.aliexpress.com/w/wholesale-NE5532-preamplifier.html" class="link">Ver en AliExpress</a></td></tr>
            <tr><td><b>ESP32-S3 Dev</b></td><td>Procesador y Puente USB-Serial</td><td><a href="https://es.aliexpress.com/w/wholesale-ESP32-S3-type-c.html" class="link">Ver en AliExpress</a></td></tr>
            <tr><td><b>ADC de 24-bits</b></td><td>Precisión extrema para saltos magnéticos</td><td><a href="https://es.aliexpress.com/w/wholesale-HX711-module.html" class="link">Ver en AliExpress</a></td></tr>
        </table>
        <p style="font-size: 0.8em; color: #666; margin-top: 20px;">*Nota: Se puede usar chatarra de microondas para el núcleo de ferrita. 0€.</p>
    </div>

    <div id="manual" class="section">
        <h3>MANUAL DE USUARIO PARA SOBERANOS</h3>
        <ol>
            <li><b>Acoplamiento Físico:</b> Pegar el sensor magnético a una viga de acero, marco de puerta blindada o tubería de agua. El metal conduce el "ruido" de Barkhausen.</li>
            <li><b>Aislamiento:</b> Envolver el conjunto en papel de aluminio (chatarra de cocina) para evitar interferencias de radio externas. Solo queremos el latido del metal.</li>
            <li><b>Conexión:</b> Conectar el ESP32 al PC/Móvil mediante USB-C.</li>
            <li><b>Interpretación:</b> El sistema detectará los "picos" de energía cuando los dominios magnéticos del metal cambian de orientación debido a la corriente de los cables internos.</li>
        </ol>
        <div class="code-block">
            // Lógica del Kernel 13101310
            if (magnetic_jump > threshold) { 
                decode_bit(interval_timing); 
                print("SECRET_CAPTURED");
            }
        </div>
    </div>

    <div id="usb" class="section">
        <h3>CONSOLA DE INTERCEPCIÓN USB</h3>
        <div class="usb-panel">
            <p>Conecta tu hardware Barkhausen-Ghost y pulsa el botón para iniciar el volcado de datos.</p>
            <button class="btn-usb" onclick="connectSerial()">CONECTAR HARDWARE USB</button>
            <div id="serial-output" style="margin-top: 20px; color: var(--neon-green); text-align: left; height: 150px; overflow-y: auto; background: #000; border: 1px solid #333; padding: 10px;">
                [ESPERANDO HARDWARE...]
            </div>
        </div>
    </div>

    <footer style="margin-top: 40px; text-align: center; border-top: 1px solid #333; padding-top: 20px;">
        <span style="color: var(--blood-orange);">ADVERTENCIA:</span> LA MATERIA NO ES MUDA. ESCUCHARLA ES TU DERECHO SOBERANO. 13101310.
    </footer>
</div>

<script>
    function showTab(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('visible'));
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active-tab'));
        document.getElementById(id).classList.add('visible');
        event.currentTarget.classList.add('active-tab');
    }

    async function connectSerial() {
        try {
            const port = await navigator.serial.requestPort();
            await port.open({ baudRate: 115200 });
            const output = document.getElementById('serial-output');
            output.innerText = ">> CONEXIÓN ESTABLECIDA. ESCUCHANDO SALTOS MAGNÉTICOS...\n";
            
            const reader = port.readable.getReader();
            while (true) {
                const { value, done } = await reader.read();
                if (done) break;
                const text = new TextDecoder().decode(value);
                output.innerText += text;
            }
        } catch (e) {
            alert("Error: Web Serial no soportado o denegado.");
        }
    }
</script>
</body>
</html>
